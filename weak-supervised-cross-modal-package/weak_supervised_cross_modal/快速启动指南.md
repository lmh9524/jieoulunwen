# 弱监督跨模态属性对齐 - 快速启动指南

## 🚀 快速开始

### 1. 环境检查
```bash
# 检查Python版本 (推荐3.8+)
python --version

# 检查CUDA支持 (可选)
python -c "import torch; print(f'CUDA available: {torch.cuda.is_available()}')"
```

### 2. 安装依赖
```bash
# 安装必要的包
pip install torch torchvision torchaudio
pip install pillow pyyaml tqdm numpy matplotlib scikit-learn

# 或者使用requirements.txt
pip install -r requirements.txt
```

### 3. 快速测试 (推荐)
```bash
# 使用简化模型进行快速测试 (不需要下载数据集)
python quick_train_cub.py --epochs 5 --batch-size 16

# 预期输出:
# - 模型参数数量: 2,403,272
# - 训练时间: 约1-2秒/epoch
# - 训练精度: 逐步提升
```

### 4. 测试数据集加载
```bash
# 测试数据集加载功能 (不需要真实数据)
python test_cub_data.py

# 预期输出:
# - 数据路径检查
# - 模块导入测试
# - 基本功能验证
```

## 📊 完整训练流程

### 1. 下载CUB数据集 (可选)
```bash
# 自动下载CUB-200-2011数据集
python download_cub_dataset.py

# 手动下载 (如果自动下载失败)
# 1. 访问: https://data.caltech.edu/records/65de6-vp158
# 2. 下载 CUB_200_2011.tgz
# 3. 解压到 data/CUB_200_2011/ 目录
```

### 2. 配置文件设置
```bash
# 检查配置文件
cat configs/cub_config.yaml

# 或者使用默认配置 (无需配置文件)
python train_cub.py --mode train --epochs 10
```

### 3. 开始训练
```bash
# 基础训练 (10个epochs)
python train_cub.py --mode train --epochs 10

# 完整训练 (50个epochs)
python train_cub.py --mode train --epochs 50 --config configs/cub_config.yaml

# 评估模型
python train_cub.py --mode eval --model checkpoints/best_model.pth

# 单图推理
python train_cub.py --mode inference --image path/to/image.jpg --model checkpoints/best_model.pth
```

## 🛠️ 故障排除

### 常见问题

#### 1. 模块导入错误
```bash
# 错误: ModuleNotFoundError
# 解决: 确保在项目根目录运行
cd weak_supervised_cross_modal
python quick_train_cub.py
```

#### 2. CUDA内存不足
```bash
# 解决: 减少batch_size
python quick_train_cub.py --batch-size 8

# 或者使用CPU
python quick_train_cub.py --device cpu
```

#### 3. 数据集路径错误
```bash
# 错误: 数据路径不存在
# 解决: 使用简化模型测试
python quick_train_cub.py  # 使用模拟数据

# 或者下载真实数据集
python download_cub_dataset.py
```

## 📈 预期结果

### 快速测试结果
- **运行时间**: 约30秒 (5个epochs)
- **模型大小**: 约2.4M参数
- **训练精度**: 0.6% → 10-15%
- **GPU内存**: 约1-2GB

### 完整训练结果
- **运行时间**: 约2-5小时 (50个epochs, 真实数据)
- **训练精度**: 期望达到60-80%
- **验证精度**: 期望达到50-70%

## 💡 提示

- 首次运行建议使用 `quick_train_cub.py` 进行测试
- 如果遇到问题，查看日志输出中的错误信息
- 可以通过调整 `batch_size` 和 `epochs` 来适应不同的硬件配置
- 项目支持CPU和GPU训练，会自动选择最佳设备

---

**需要帮助？** 查看 `项目改进总结.md` 获取更多详细信息。 